gaps:
  - id: "GAP-001"
    category: "documentation"
    severity: "high"
    description: "The seed.yaml is entirely unfilled — idea, target_user, constraints, non_goals, and success_criteria are all [TODO] placeholders. This means there is no documented project purpose, intended audience, or success criteria for the adopted project."
    recommendation: "Conduct a stakeholder interview or derive from existing docs (PROCESS.md, README.md, ROADMAP.md) to fill in the seed.yaml fields. At minimum, define the core idea, target user, and 3-5 success criteria."

  - id: "GAP-002"
    category: "testing"
    severity: "high"
    description: "Of 143 files, only one file is classified as a test (crates/process-checks/src/test.rs). There are no visible test files for process-ai (beyond inline tests in registry.rs per INV-012), process-config, process-core, process-generators, process-reviews, or the CLI layer. Critical subsystems like the pass engine, configuration layering, template resolution, manifest handling, and all generator/review implementations appear to have zero test coverage."
    recommendation: "Prioritize integration and unit tests for: (1) Config::load() layered resolution (INV-017), (2) PassManager registration and execution ordering, (3) PromptEngine template resolution fallback chain (INV-019), (4) each Generator's auto-detection logic (INV-026), (5) ReviewTemplate implementations. Establish a coverage target (e.g., 60%) and add CI enforcement."

  - id: "GAP-003"
    category: "testing"
    severity: "medium"
    description: "No integration or end-to-end tests exist for the CLI subcommands. With 21+ subcommands (diverge, converge, skeleton, seed, and their -validate variants), there is no evidence of command-level testing that exercises the full execution path."
    recommendation: "Create an integration test suite under a top-level `tests/` directory or `process-cli/tests/` that invokes subcommands with fixture data and asserts on exit codes, stdout output, and generated artifacts."

  - id: "GAP-004"
    category: "security"
    severity: "high"
    description: "The process-ai crate integrates with multiple external AI providers (Claude, OpenAI, Ollama) and the decisions log references a commit addressing 'API key security' (32391c6), but there is no documented security model for credential storage, transmission, or rotation. The configuration system (INV-017) supports environment variables (PROCESS_CLI_*), but it's unclear whether API keys can also be stored in plaintext YAML config files."
    recommendation: "Document the credential management strategy explicitly. Ensure API keys are never serialized to disk in plaintext config files. Consider supporting OS keychain integration or encrypted config. Add a sensitive data check (process-checks/src/sensitive.rs exists but its coverage and scope are unclear) that scans for leaked credentials in generated artifacts."

  - id: "GAP-005"
    category: "security"
    severity: "medium"
    description: "The process-ai crate shells out to Claude CLI (claude_cli.rs) using stdin for prompt passing. There is no documented input sanitization or validation of AI-generated responses before they are used in downstream operations (e.g., code generation, file writing)."
    recommendation: "Document the trust boundary between AI provider responses and the system. Implement output validation/sanitization for AI responses before they are written to disk or executed. Consider sandboxing generated content."

  - id: "GAP-006"
    category: "architecture"
    severity: "high"
    description: "The process-cli binary crate is conspicuously absent from the skeleton. There is no `process-cli/src/main.rs`, no `process-cli/src/commands/` directory, and no `process-cli/Cargo.toml` listed — yet the docs directory (process-cli/docs/) and README exist. The CLI binary that ties all crates together appears to be missing from the file listing, or the project structure has diverged from the documented architecture."
    recommendation: "Verify whether the CLI binary crate exists but was excluded from scanning, or if it genuinely hasn't been implemented yet. If missing, this is the critical integration layer that must be built. If present, re-run the scan to capture it."

  - id: "GAP-007"
    category: "consistency"
    severity: "medium"
    description: "Both `anyhow` and `miette` are listed as dependencies. These are competing error-handling crates with different philosophies (anyhow for simple error propagation, miette for rich diagnostic reporting). INV-005 establishes anyhow::Result as the standard, but miette's presence suggests either an incomplete migration or an undocumented decision to use miette for user-facing errors."
    recommendation: "Document the intended role of each error crate. If miette is for CLI-facing diagnostics and anyhow for library internals, make this explicit in ARCHITECTURE.md. If miette was experimental, remove the dependency to reduce confusion."

  - id: "GAP-008"
    category: "architecture"
    severity: "medium"
    description: "The pass engine (process-core/src/pass_manager.rs, pass.rs, phase.rs, state.rs) is identified as a core architectural decision (MS7) but there is no documentation explaining pass ordering, dependency resolution, state transitions between phases, or how passes compose. The ARCHITECTURE.md in process-cli/docs/ may cover this partially, but the pass engine's internal design is undocumented in the rules or decisions."
    recommendation: "Create dedicated documentation for the pass engine covering: pass lifecycle, dependency declaration and resolution, state management between passes, error handling and rollback semantics, and how to implement a custom pass."

  - id: "GAP-009"
    category: "debt"
    severity: "medium"
    description: "The legacy/v1/ directory contains the original shell script implementation and .process state files. This legacy code is still in the repository and may cause confusion about which implementation is canonical. The legacy directory includes configuration formats (friction.yaml, rules.yaml, seed.yaml) that may or may not be compatible with the Rust implementation."
    recommendation: "Either archive the legacy directory to a separate branch/tag and remove it from main, or add a clear deprecation notice. Document any format migrations needed from v1 to v2 state files."

  - id: "GAP-010"
    category: "debt"
    severity: "medium"
    description: "The auto/ directory contains generated artifacts (Makefile, CI workflows, git hooks, VS Code settings) that appear to be output from the process-generators crate, but they are checked into the repository under auto/1e-project/. It's unclear whether these are example outputs, actively used project configuration, or stale generated artifacts."
    recommendation: "Document the purpose of the auto/ directory. If these are example/template outputs, move them to an examples/ directory. If they are the project's own CI/hooks, move them to their canonical locations (.github/workflows/, .githooks/, etc.) and add a generation manifest tracking what was auto-generated."

  - id: "GAP-011"
    category: "documentation"
    severity: "medium"
    description: "There is no CONTRIBUTING.md, no documented development setup process in the root, and no explanation of the crate dependency graph. New contributors would need to reverse-engineer the workspace structure. The DEVELOPMENT.md exists only under auto/1e-project/ which appears to be generated output, not the actual project's development guide."
    recommendation: "Create a root-level CONTRIBUTING.md covering: workspace setup, crate dependency graph, how to add a new provider/check/generator/pass, testing conventions, and the code review process referenced in the decisions log."

  - id: "GAP-012"
    category: "consistency"
    severity: "medium"
    description: "The decisions log references milestones MS1 through MS7, and ROADMAP.md and PROGRESS.md exist, but there is no mapping between milestone identifiers and their completion status visible in the artifacts. The skeleton shows no milestone tracking file or status dashboard."
    recommendation: "Consolidate milestone status into PROGRESS.md or ROADMAP.md with clear completion indicators. Cross-reference milestone IDs (MS1-MS7) with the decisions log entries."

  - id: "GAP-013"
    category: "testing"
    severity: "medium"
    description: "The process-checks crate includes sensitive.rs for sensitive data detection, but there are no test fixtures or test cases visible for validating that sensitive data patterns (API keys, passwords, tokens) are correctly detected across different file types and formats."
    recommendation: "Add comprehensive test cases for sensitive.rs covering: common API key formats (AWS, GCP, GitHub tokens), false positive scenarios, and edge cases like base64-encoded secrets. Include test fixtures with known-sensitive and known-safe content."

  - id: "GAP-014"
    category: "architecture"
    severity: "low"
    description: "The template system uses Tera (.tera files) with templates organized under templates/prompts/ with provider-specific (claude/) and default (_default/) directories. However, there is no schema or documentation for the template context variables that are available to template authors. Template authors must read source code to know what variables are injected."
    recommendation: "Document the template context schema — list all variables available in each template type (diverge, converge, skeleton, review.*) with their types and example values. Consider generating this documentation from the code."

  - id: "GAP-015"
    category: "security"
    severity: "medium"
    description: "The .claude/settings.local.json file is checked into the repository. This may contain local user preferences or potentially sensitive configuration for the Claude integration that should not be shared across developers."
    recommendation: "Review the contents of .claude/settings.local.json. If it contains user-specific or sensitive data, add it to .gitignore and provide a .claude/settings.local.json.example template instead."

  - id: "GAP-016"
    category: "consistency"
    severity: "low"
    description: "INV-009 states async_trait is used for AiProvider implementations, and tokio is a dependency, but there is no documentation of the async runtime requirements or configuration. It's unclear whether the entire CLI is async or only the AI provider layer."
    recommendation: "Document the async boundary — specify that tokio is the runtime, which entry points are async, and whether the CLI uses #[tokio::main] or block_on for selective async execution. This affects how new commands and passes should be implemented."

  - id: "GAP-017"
    category: "debt"
    severity: "low"
    description: "INV-020 documents the use of #[allow(dead_code)] for deserialization-only fields. This is a code smell that suggests validation structs are doing double duty as both deserialization targets and domain objects. As the codebase grows, these suppressions may mask genuinely unused code."
    recommendation: "Consider separating deserialization DTOs from domain validation logic, or use serde's deny_unknown_fields and required field validation at the serde level rather than relying on struct field presence as implicit validation."

  - id: "GAP-018"
    category: "documentation"
    severity: "medium"
    description: "The process-reviews crate contains review templates for security, performance, architecture, and general reviews, but there is no user-facing documentation explaining when each review type should be used, what they check for, or how to interpret their output."
    recommendation: "Add a REVIEWS.md or extend COMMANDS.md to document each review template's purpose, trigger conditions, expected input, and output format. Include example review outputs."

  - id: "GAP-019"
    category: "architecture"
    severity: "medium"
    description: "The skeleton shows templates/prompts/_default/branch_abuse.md.tera which suggests a branch abuse detection feature, but there is no corresponding source code module or command visible in the skeleton. This may be an incomplete feature or an orphaned template."
    recommendation: "Audit all template files against implemented commands and features. Remove orphaned templates or implement the missing features. Track incomplete features in ROADMAP.md."

  - id: "GAP-020"
    category: "consistency"
    severity: "low"
    description: "Dependency versions in seed.yaml are all listed as '*' (wildcard) except toml (0.8) and walkdir (2.4). The actual pinned versions would be in Cargo.lock, but the seed doesn't reflect real version constraints from Cargo.toml files, making dependency auditing difficult."
    recommendation: "Update the seed.yaml dependency versions to reflect the actual version constraints from the workspace Cargo.toml files. This enables accurate dependency vulnerability scanning and compatibility analysis."

  - id: "GAP-021"
    category: "security"
    severity: "low"
    description: "The auto/1e-project/github-workflows/ directory contains CI workflow files (ci.yml, auto-review.yml) but they are not in the standard .github/workflows/ location. If these are the project's actual CI definitions, they are not being executed by GitHub Actions."
    recommendation: "Determine whether these workflows are templates/examples or the project's actual CI. If actual, move to .github/workflows/. If templates, document them as such. Either way, ensure the project has active CI running clippy, tests, and security audits (cargo-audit)."

  - id: "GAP-022"
    category: "testing"
    severity: "high"
    description: "The AI provider implementations (Claude, OpenAI, Ollama, Claude CLI) have no visible tests. These are external integration points that are notoriously fragile — API format changes, authentication failures, rate limiting, and network errors all need test coverage. Only MockProvider exists for registry tests."
    recommendation: "Add unit tests for each provider covering: request construction, response parsing, error handling for common failure modes (auth failure, rate limit, malformed response, timeout). Use recorded HTTP fixtures or mock servers rather than live API calls. Add contract tests that verify provider implementations satisfy the AiProvider trait invariants."